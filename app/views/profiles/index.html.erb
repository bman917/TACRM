<%=javascript_tag do %>

$(document).ready(function(){
  init_profiles_index();
});
<% end %>

<h1>Traveler Profiles</h1>

<%= form_for(@profile) do |f| %>

  <% if @profile.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

      <ul>
      <% @profile.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <%= link_to 'Add Profile', '', id: 'show_new_profile_row_link' %>
    <table>
      <thead>
        <tr>
          <th>First name</th>
          <th>Last name</th>
          <th>Middle name</th>
          <th>Birth day</th>
          <th>Gender</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        <tr id="new_profile_row">
          <td><%= f.text_field :first_name %></td>
          <td><%= f.text_field :last_name %></td>
          <td><%= f.text_field :middle_name %></td>
          <td><%= f.text_field :birth_day %></td>
          <td><%= f.select :gender, [['Male','M'],['Female','F']] %></td>
          <td><%= f.submit %></td>
          <td><%= link_to 'Hide', '', id: "hide_new_profile_row_link"%></td>
          <td></td>
        </tr>
        <% @profiles.each do |profile| %>
          <tr>
            <td><%= profile.first_name %></td>
            <td><%= profile.last_name %></td>
            <td><%= profile.middle_name %></td>
            <td><%= profile.birth_day %></td>
            <td><%= profile.gender %></td>
            <td><%= link_to 'Show', profile %></td>
            <td><%= link_to 'Edit', edit_profile_path(profile) %></td>
            <td><%= link_to 'Destroy', profile, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
<% end %>
<br>
<!--%= link_to 'New Profile', new_profile_path %-->
